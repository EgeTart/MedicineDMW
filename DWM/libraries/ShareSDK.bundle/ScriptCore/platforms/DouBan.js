var $pluginID = "com.mob.sharesdk.DouBan";eval(function(p,a,c,k,e,r){e=function(c){return(c<62?'':e(parseInt(c/62)))+((c=c%62)>35?String.fromCharCode(c+29):c.toString(36))};if('0'.replace(0,e)==0){while(c--)r[e(c)]=k[c];k=[function(e){return r[e]||e}];e=function(){return'([7-9a-cefhk-mo-qs-zA-Z]|[12]\\w)'};c=1};while(c--)if(k[c])p=p.replace(new RegExp('\\b'+e(c)+'\\b','g'),k[c]);return p}('c z={"15":"api_key","16":"1i","17":"1Q","1l":"covert_url"};h l(m){9.2b=m;9.t={"I":8,"J":8};9.18=8}l.p.m=h(){x 9.2b};l.p.T=h(){x"豆瓣"};l.p.U=h(){a(9.t["J"]!=8&&9.t["J"][z.15]!=8){x 9.t["J"][z.15]}s a(9.t["I"]!=8&&9.t["I"][z.15]!=8){x 9.t["I"][z.15]}x 8};l.p.1i=h(){a(9.t["J"]!=8&&9.t["J"][z.16]!=8){x 9.t["J"][z.16]}s a(9.t["I"]!=8&&9.t["I"][z.16]!=8){x 9.t["I"][z.16]}x 8};l.p.19=h(){a(9.t["J"]!=8&&9.t["J"][z.17]!=8){x 9.t["J"][z.17]}s a(9.t["I"]!=8&&9.t["I"][z.17]!=8){x 9.t["I"][z.17]}x 8};l.p.1R=h(){x"2c-2d-"+$7.b.1m.l+"-"+9.U()};l.p.1S=h(){a(9.t["J"]!=8&&9.t["J"][z.1l]!=8){x 9.t["J"][z.1l]}s a(9.t["I"]!=8&&9.t["I"][z.1l]!=8){x 9.t["I"][z.1l]}x $7.b.1S()};l.p.2e=h(1j){a(2f.1a==0){x 9.t["I"]}s{9.t["I"]=9.1T(1j)}};l.p.2g=h(1j){a(2f.1a==0){x 9.t["J"]}s{9.t["J"]=9.1T(1j)}};l.p.saveConfig=h(){c q=9;c 1b="2c-2d";$7.1c.2h("2i",1n,1b,h(e){a(e!=8){c 1o=e.1j;a(1o==8){1o={}}1o["plat_"+q.m()]=q.U();$7.1c.2j("2i",1o,1n,1b,8)}})};l.p.isSupportAuth=h(){x 2k};l.p.authorize=h(F,1U){c o=8;a(9.2l()){9.2m(F,1U)}s{o={"B":$7.b.G.InvaildPlatform,"P":"分享平台［"+9.T()+"］应用信息无效!"};$7.Q.X(F,$7.b.v.C,o)}};l.p.handleAuthCallback=h(F,1y){c o=8;c q=9;c 1z=$7.K.parseUrl(1y);a(1z!=8&&1z.1A!=8){c y=$7.K.parseUrlParameters(1z.1A);a(y!=8){y["2n"]=9.U();y["client_secret"]=9.1i();y["grant_type"]="authorization_code";y["1Q"]=9.19();$7.1c.2o($7.b.1m.l,8,"1B://2p.1C.1D/2q/2r/1V","1E",y,8,h(e){a(e!=8){a(e["B"]!=8){$7.Q.X(F,$7.b.v.C,e)}s a(e["1W"]!=8&&e["1W"]==2s){c O=$7.K.2t($7.K.2u(e["2v"]));a(O.1d==8){q.2w(F,O)}s{o={"B":$7.b.G.Y,"1F":O};$7.Q.X(F,$7.b.v.C,o)}}s{o={"B":$7.b.G.Y,"1F":e};$7.Q.X(F,$7.b.v.C,o)}}s{o={"B":$7.b.G.Y};$7.Q.X(F,$7.b.v.C,o)}})}s{o={"B":$7.b.G.2x,"P":"无效的授权回调:["+1y+"]"};$7.Q.X(F,$7.b.v.C,o)}}s{o={"B":$7.b.G.2x,"P":"无效的授权回调:["+1y+"]"};$7.Q.X(F,$7.b.v.C,o)}};l.p.cancelAuthorize=h(){9.1G(8,8)};l.p.addFriend=h(F,k,f){c o={"B":$7.b.G.1X,"P":"分享平台［"+9.T()+"］不支持添加好友!"};a(f!=8){f($7.b.v.C,o)}};l.p.getFriends=h(cursor,size,f){c o={"B":$7.b.G.1X,"P":"分享平台［"+9.T()+"］不支持获取好友列表!"};a(f!=8){f($7.b.v.C,o)}};l.p.share=h(F,H,f){c w=8;c A=8;c V=8;c 1p=8;c D=8;c L=8;c q=9;c 1H=H["@1H"];c 1e={"@1H":1H};c m=$7.b.N(9.m(),H,"m");a(m==8){m=$7.b.Z.2y}a(m==$7.b.Z.2y){m=9.2z(H)}c 1I="1B://2A.1C.1D/shuo/v2/statuses/";c y=8;2C(m){R $7.b.Z.2D:{w=$7.b.N(9.m(),H,"w");y={"w":w};9.1f(h(k){q.1J([w],h(e){y["w"]=e.10[0];q.1q(1I,"1E",y,h(M,e){c u=e;a(M==$7.b.v.1g){a(e!=8){u={};u["1r"]=e;u["1Y"]=e["id"];u["w"]=e["w"]}}a(f!=8){f(M,u,k,1e)}})})});11}R $7.b.Z.2E:{D=$7.b.N(9.m(),H,"D");a(1Z.p.1L.20(D)===\'[21 22]\'){L=D[0]}w=$7.b.N(9.m(),H,"w");a(L!=8){9.2F(L,h(1s){c 1t="application/octet-stream";a(/\\.jpe?g$/.1k(1s)){1t="L/jpeg"}s a(/\\.2G$/.1k(1s)){1t="L/2G"}s a(/\\.2H$/.1k(1s)){1t="L/2H"}c 1u={"path":1s,"mime_type":1t};y={"L":"@1u("+$7.K.1M(1u)+")","w":w};q.1f(h(k){q.1J([w],h(e){y["w"]=e.10[0];q.1q(1I,"1E",y,h(M,e){c u=e;a(M==$7.b.v.1g){a(e!=8){u={};u["1r"]=e;u["1Y"]=e["id"];u["w"]=e["w"];u["D"]=[];c S=e["S"];a(S!=8){1v(c i=0;i<S.1a;i++){c 12=S[i]["13"];a(12!=8){1v(c j=0;j<12.1a;j++){c 13=12[j];a(13["m"]=="L"){u["D"].2I(13["2J"]);11}}}}}}}a(f!=8){f(M,u,k,1e)}})})})})}s{o={"B":$7.b.G.Y,"P":"分享参数L不能为空!"};a(f!=8){f($7.b.v.C,o,8,1e)}}11}R $7.b.Z.2K:A=$7.b.N(9.m(),H,"A");w=$7.b.N(9.m(),H,"w");V=$7.b.N(9.m(),H,"V");1p=$7.b.N(9.m(),H,"1p");L=$7.b.N(9.m(),H,"url_image");D=$7.b.N(9.m(),H,"D");a(1Z.p.1L.20(D)===\'[21 22]\'){1v(c i=0;i<D.1a;i++){a(!/^(1u\\:\\/)?\\//.1k(D[i])){L=D[i];11}}}a(V!=8&&A!=8){y={"w":w,"rec_title":V,"2L":A,"2M":1p,"rec_image":L};q.1f(h(k){q.1J([w,1p,A],h(e){y["w"]=e.10[0];y["2M"]=e.10[1];y["2L"]=e.10[2];q.1q(1I,"1E",y,h(M,e){c u=e;a(M==$7.b.v.1g){a(e!=8){u={};u["1r"]=e;u["1Y"]=e["id"];u["w"]=e["w"];u["urls"]=[A];u["D"]=[];c S=e["S"];a(S!=8){1v(c i=0;i<S.1a;i++){c 12=S[i]["13"];a(12!=8){1v(c j=0;j<12.1a;j++){c 13=12[j];a(13["m"]=="L"){u["D"].2I(13["2J"]);11}}}}}}}a(f!=8){f(M,u,k,1e)}})})})}s{o={"B":$7.b.G.Y,"P":"分享参数A、V不能为空!"};a(f!=8){f($7.b.v.C,o,8,1e)}}11;default:{c o={"B":$7.b.G.UnsupportContentType,"P":"不支持的分享类型["+m+"]"};a(f!=8){f($7.b.v.C,o,8,1e)}11}}};l.p.2N=h(1A,f){c q=9;a(1A!=8){c o={"B":$7.b.G.1X,"P":"分享平台［"+q.T()+"］不支持获取其他用户资料!"};a(f!=8){f($7.b.v.C,o)}x}q.1f(h(k){q.1q("1B://2A.1C.1D/v2/k/~me","GET",8,h(M,e){c u=e;a(M==$7.b.v.1g){u={"23":q.m()};q.24(u,e);a(u["1N"]==k["1N"]){u["W"]=k["W"]}}a(f!=8){f(M,u)}})})};l.p.1q=h(A,2O,y,f){c o=8;c q=9;9.1f(h(k){a(k!=8){a(y==8){y={}}y["source"]=q.U();c 25=8;a(k.W!=8){25={"Authorization":"Bearer "+k.W.1V}}$7.1c.2o($7.b.1m.l,8,A,2O,y,25,h(e){a(e!=8){a(e["B"]!=8){a(f){f($7.b.v.C,e)}}s{c O=$7.K.2t($7.K.2u(e["2v"]));a(e["1W"]==2s){a(O["1d"]==8&&O["r"]==8){a(f){f($7.b.v.1g,O)}}s{c 1d=$7.b.G.Y;2C(O["1d"]){R 102:R 103:R 106:R 118:R 119:R 123:R 124:1d=$7.b.G.2P;11}o={"B":1d,"1F":O};a(f){f($7.b.v.C,o)}}}s{o={"B":$7.b.G.Y,"1F":O};a(f){f($7.b.v.C,o)}}}}s{o={"B":$7.b.G.Y};a(f){f($7.b.v.C,o)}}})}s{o={"B":$7.b.G.2P,"P":"尚未授权["+q.T()+"]用户"};a(f){f($7.b.v.C,o)}}})};l.p.createUserByRawData=h(E){c k={"23":9.m()};9.24(k,E);x $7.K.1M(k)};l.p.2F=h(A,f){a(!/^(1u\\:\\/)?\\//.1k(A)){$7.1c.downloadFile(A,h(e){a(e.10!=8){a(f!=8){f(e.10)}}s{a(f!=8){f(8)}}})}s{a(f!=8){f(A)}}};l.p.1J=h(26,f){a(9.1S()){c q=9;9.1f(h(k){$7.b.convertUrl(q.m(),k,26,f)})}s{a(f){f({"10":26})}}};l.p.2z=h(H){c m=$7.b.Z.2D;c A=$7.b.N(9.m(),H,"A");c V=$7.b.N(9.m(),H,"V");a(A!=8&&V!=8){m=$7.b.Z.2K}s{c D=$7.b.N(9.m(),H,"D");a(1Z.p.1L.20(D)===\'[21 22]\'){m=$7.b.Z.2E}}x m};l.p.24=h(k,E){a(k!=8&&E!=8){k["1r"]=E;k["1N"]=E["id"];k["nickname"]=E["T"];a(E["2Q"]!=8){k["27"]=E["2Q"]}s a(E["2R"]){k["27"]=E["2R"]}s a(E["2S"]){k["27"]=E["2S"]}k["gender"]=2;k["A"]=E["alt"];a(E["1O"]!=8){c 1w=8;c 28=/(\\d+)-(\\d+)-(\\d+) (\\d+):(\\d+):(\\d+)/;a(28.1k(E["1O"])){c 1h=28.exec(E["1O"]);1w=29 1P(1h[1],1h[2]-1,1h[3],1h[4],1h[5],1h[6])}s{1w=29 1P(E["1O"])}a(1w.1L()!="Invalid 1P"){k["reg_at"]=1w.2T()}}}};l.p.2m=h(F,1U){c A="1B://2p.1C.1D/2q/2r/auth?2n="+9.U()+"&response_type=1d&1Q="+$7.K.urlEncode(9.19())+"&display=mobile";$7.Q.ssdk_openAuthUrl(F,A,9.19())};l.p.2w=h(F,1x){c q=9;c W={"1N":1x["douban_user_id"],"1V":1x["access_token"],"expired":(29 1P().2T()+1x["expires_in"]*1000),"1r":1x,"m":$7.b.credentialType.OAuth2};c k={"23":$7.b.1m.l,"W":W};9.1G(k,h(){q.2N(8,h(M,e){a(M==$7.b.v.1g){e["W"]=k["W"];k=e;q.1G(k,8)}$7.Q.X(F,$7.b.v.1g,k)})})};l.p.1G=h(k,f){9.18=k;c 1b=9.1R();$7.1c.2j("2U",9.18,1n,1b,h(e){a(f!=8){f()}})};l.p.1f=h(f){a(9.18!=8){a(f){f(9.18)}}s{c q=9;c 1b=9.1R();$7.1c.2h("2U",1n,1b,h(e){q.18=e!=8?e.1j:8;a(f){f(q.18)}})}};l.p.2l=h(){a(9.U()!=8&&9.1i()!=8&&9.19()!=8){x 2k}$7.Q.log("#warning:["+9.T()+"]应用信息有误，不能进行相关操作。请检查本地代码中和服务端的["+9.T()+"]平台应用配置是否有误! \\n本地配置:"+$7.K.1M(9.2e())+"\\n服务器配置:"+$7.K.1M(9.2g()));x 1n};l.p.1T=h(14){c U=$7.K.2a(14[z.15]);c 1i=$7.K.2a(14[z.16]);c 19=$7.K.2a(14[z.17]);14[z.15]=U;14[z.16]=1i;14[z.17]=19;x 14};$7.b.registerPlatformClass($7.b.1m.l,l);',[],181,'|||||||mob|null|this|if|shareSDK|var||data|callback||function|||user|DouBan|type||error|prototype|self||else|_appInfo|resultData|responseState|text|return|params|DouBanAppInfoKeys|url|error_code|Fail|images|rawData|sessionId|errorCode|parameters|local|server|utils|image|state|getShareParam|response|error_message|native|case|attachments|name|apiKey|title|credential|ssdk_authStateChanged|APIRequestFail|contentType|result|break|medias|media|appInfo|ApiKey|Secret|RedirectUri|_currentUser|redirectUri|length|domain|ext|code|userData|_getCurrentUser|Success|res|secret|value|test|ConvertUrl|platformType|false|curApps|desc|callApi|raw_data|imageUrl|mimeType|file|for|date|credentialRawData|callbackUrl|urlInfo|query|https|douban|com|POST|user_data|_setCurrentUser|flags|requestUrl|_convertUrl||toString|objectToJsonString|uid|created|Date|redirect_uri|cacheDomain|convertUrlEnabled|_checkAppInfoAvailable|settings|token|status_code|UnsupportFeature|cid|Object|apply|object|Array|platform_type|_updateUserInfo|header|contents|icon|exp|new|trim|_type|SSDK|Platform|localAppInfo|arguments|serverAppInfo|getCacheData|currentApp|setCacheData|true|_isAvailable|_webAuthorize|client_id|ssdk_callHTTPApi|www|service|auth2|200|jsonStringToObject|base64Decode|response_data|_succeedAuthorize|InvalidAuthCallback|Auto|_getShareType|api||switch|Text|Image|_getImagePath|png|gif|push|src|WebPage|rec_url|rec_desc|getUserInfo|method|UserUnauth|large_avatar|avatar|small_avatar|getTime|currentUser'.split('|'),0,{}))